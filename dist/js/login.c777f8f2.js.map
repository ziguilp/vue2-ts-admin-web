{"version":3,"sources":["webpack:///./src/views/login/index.vue?3b28","webpack:///./src/views/login/index.vue?e3b4","webpack:///./src/views/login/index.vue?ddd0","webpack:///./src/views/login/index.vue?3341","webpack:///./src/views/login/index.vue?aacd","webpack:///./src/views/login/index.vue","webpack:///./src/views/login/index.vue?e7d2"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","loginForm","loginRules","_v","_s","settings","title","model","value","callback","$$v","$set","expression","key","passwordType","nativeOn","$event","type","indexOf","_k","keyCode","handleLogin","on","showPwd","staticStyle","loading","preventDefault","staticRenderFns","validateUsername","rule","Error","validatePassword","length","username","password","validator","trigger","showDialog","otherQuery","route","query","redirect","getOtherQuery","$refs","focus","$nextTick","validate","valid","Login","catch","loginRes","$router","push","path","GetPermission","setTimeout","Object","keys","reduce","acc","cur","immediate","name","component","module","exports"],"mappings":"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","file":"js/login.c777f8f2.js","sourcesContent":["export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=0fe90aa3&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-container\"},[_c('el-form',{ref:\"loginForm\",staticClass:\"login-form\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.loginRules,\"autocomplete\":\"on\",\"label-position\":\"left\"}},[_c('div',{staticClass:\"title-container\"},[_c('h3',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.settings.title))])]),_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('span',{staticClass:\"svg-container\"},[_c('svg-icon',{attrs:{\"name\":\"user\"}})],1),_c('el-input',{ref:\"username\",attrs:{\"name\":\"username\",\"type\":\"text\",\"autocomplete\":\"on\",\"placeholder\":\"用户名\"},model:{value:(_vm.loginForm.username),callback:function ($$v) {_vm.$set(_vm.loginForm, \"username\", $$v)},expression:\"loginForm.username\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('span',{staticClass:\"svg-container\"},[_c('svg-icon',{attrs:{\"name\":\"password\"}})],1),_c('el-input',{key:_vm.passwordType,ref:\"password\",attrs:{\"type\":_vm.passwordType,\"placeholder\":\"密码\",\"name\":\"password\",\"autocomplete\":\"on\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleLogin($event)}},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}}),_c('span',{staticClass:\"show-pwd\",on:{\"click\":_vm.showPwd}},[_c('svg-icon',{attrs:{\"name\":_vm.passwordType === 'password' ? 'eye-off' : 'eye-on'}})],1)],1),_c('el-button',{staticStyle:{\"width\":\"100%\",\"margin-bottom\":\"30px\"},attrs:{\"loading\":_vm.loading,\"type\":\"primary\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.handleLogin($event)}}},[_vm._v(\"登录\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport { Route } from \"vue-router\";\nimport { Dictionary } from \"vue-router/types/router\";\nimport { Form as ElForm, Input } from \"element-ui\";\nimport { UserModule } from \"@/store/modules/user\";\nimport { isValidUsername } from \"@/utils/validate\";\nimport settings from \"@/settings\";\n\n@Component({\n    name: \"Login\",\n})\nexport default class extends Vue {\n    private settings = settings;\n    private validateUsername = (\n        rule: any,\n        value: string,\n        callback: Function\n    ) => {\n        if (!isValidUsername(value)) {\n            callback(new Error(\"请输入正确的用户名\"));\n        } else {\n            callback();\n        }\n    };\n\n    private validatePassword = (\n        rule: any,\n        value: string,\n        callback: Function\n    ) => {\n        if (value.length < 6) {\n            callback(new Error(\"密码至少6位\"));\n        } else {\n            callback();\n        }\n    };\n\n    private loginForm = {\n        username: \"\",\n        password: \"\",\n    };\n\n    private loginRules = {\n        username: [{ validator: this.validateUsername, trigger: \"blur\" }],\n        password: [{ validator: this.validatePassword, trigger: \"blur\" }],\n    };\n\n    private passwordType = \"password\";\n    private loading = false;\n    private showDialog = false;\n    private redirect?: string;\n    private otherQuery: Dictionary<string> = {};\n\n    @Watch(\"$route\", { immediate: true })\n    private onRouteChange(route: Route) {\n        // TODO: remove the \"as Dictionary<string>\" hack after v4 release for vue-router\n        // See https://github.com/vuejs/vue-router/pull/2050 for details\n        const query = route.query as Dictionary<string>;\n        if (query) {\n            this.redirect = query.redirect;\n            this.otherQuery = this.getOtherQuery(query);\n        }\n    }\n\n    mounted() {\n        if (this.loginForm.username === \"\") {\n            (this.$refs.username as Input).focus();\n        } else if (this.loginForm.password === \"\") {\n            (this.$refs.password as Input).focus();\n        }\n    }\n\n    private showPwd() {\n        if (this.passwordType === \"password\") {\n            this.passwordType = \"\";\n        } else {\n            this.passwordType = \"password\";\n        }\n        this.$nextTick(() => {\n            (this.$refs.password as Input).focus();\n        });\n    }\n\n    private handleLogin() {\n        (this.$refs.loginForm as ElForm).validate(async (valid: boolean) => {\n            if (valid) {\n                this.loading = true;\n                const loginRes = await UserModule.Login(this.loginForm).catch(\n                    () => {\n                        this.loading = false;\n                    }\n                );\n                if (!loginRes) {\n                    return;\n                }\n                this.$router.push({\n                    path: this.redirect || \"/\",\n                    query: this.otherQuery,\n                });\n                UserModule.GetPermission();\n                // Just to simulate the time of the request\n                setTimeout(() => {\n                    this.loading = false;\n                }, 0.5 * 1000);\n            } else {\n                return false;\n            }\n        });\n    }\n\n    private getOtherQuery(query: Dictionary<string>) {\n        return Object.keys(query).reduce((acc, cur) => {\n            if (cur !== \"redirect\") {\n                acc[cur] = query[cur];\n            }\n            return acc;\n        }, {} as Dictionary<string>);\n    }\n}\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/@vue/cli-plugin-typescript/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/@vue/cli-plugin-typescript/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0fe90aa3&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=0fe90aa3&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0fe90aa3\",\n  null\n  \n)\n\nexport default component.exports","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuBg\":\"#304156\",\"menuText\":\"#bfcbd9\",\"menuActiveText\":\"#409eff\"};"],"sourceRoot":""}